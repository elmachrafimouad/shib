(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{408:function(e,t,n){"use strict";n.r(t);var r=n(809),a=n.n(r),o=n(2447),s=n(4047),c=n(2700),u=n(4706),l=n(8127),d=n(4102),i=n(775),h=n(6265),k=n(7294),f=n.n(k),p=n(6430),w=n(416),Z=n(1719),v=n(8237),m=n(8788),g=n(1364),x=(n(835),n(8974)),b=n(9143),S=f().createElement;function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,i.Z)(e);if(t){var a=(0,i.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var M=new(n(7918)),_=M.utils.BN,B=function(e){(0,l.Z)(n,e);var t=y(n);function n(e){var r;return(0,s.Z)(this,n),r=t.call(this,e),(0,h.Z)((0,u.Z)(r),"state",{loaded:!1,disabled:!1,tokenAmount:1,kycAddress:"",tokenRate:0,errorMessage:"",checked:!1,isKyc:!1}),(0,h.Z)((0,u.Z)(r),"componentDidMount",(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,b.Z)();case 3:return r.web3=e.sent,e.next=6,r.web3.eth.getAccounts();case 6:return r.accounts=e.sent,e.next=9,r.web3.eth.net.getId();case 9:return r.networkId=e.sent,r.tokenSaleInstance=new r.web3.eth.Contract(x.Mt,x.QW[r.networkId]&&x.QW[r.networkId].address),e.next=13,r.tokenSaleInstance.methods.tokenSold().call();case 13:return r.tokenSold=e.sent,console.log(r.tokenSold),e.next=17,r.tokenSaleInstance.methods.rate().call();case 17:return r.tokenRate=e.sent,e.next=20,M.utils.fromWei(r.tokenRate,"ether");case 20:return r.rate=e.sent,r.setState({tokenRate:r.rate}),e.next=24,r.tokenSaleInstance.methods.tokenSold().call();case 24:r.tokenSold=e.sent,console.log(r.tokenSold),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),alert("Failed to load web3, accounts, or contract. Check console for details.");case 31:case"end":return e.stop()}}),e,null,[[0,28]])})))),(0,h.Z)((0,u.Z)(r),"handleBuyToken",(0,o.Z)(a().mark((function e(){var t,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({loaded:!0,errorMessage:""}),e.prev=1,e.next=4,r.web3.eth.getBalance(r.accounts[0]);case 4:return t=e.sent,e.next=7,M.utils.fromWei(new _(t),"ether");case 7:if(n=e.sent,console.log(n+"Ether"),!r.state.checked){e.next=28;break}if(!(n>=r.rate)){e.next=25;break}return e.prev=11,e.next=14,M.utils.toWei(new _(1),"Ether");case 14:return o=e.sent,e.next=17,r.tokenSaleInstance.methods.buyTokens(r.accounts[0]).send({from:r.accounts[0],value:M.utils.toWei(new _(o),"wei")});case 17:r.setState({loaded:!1,errorMessage:"1 Token added to this address '"+r.accounts[0]+"'"}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(11),r.setState({loaded:!1,errorMessage:e.t0.message});case 23:e.next=26;break;case 25:r.setState({loaded:!1,errorMessage:"Your don't have enough balance"});case 26:e.next=29;break;case 28:r.state.checked||r.setState({loaded:!1,errorMessage:"Accept Terms & Conditions"});case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(1),r.setState({loaded:!1,errorMessage:e.t1.message});case 34:case"end":return e.stop()}}),e,null,[[1,31],[11,20]])})))),(0,h.Z)((0,u.Z)(r),"handleCheckbox",(0,o.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.state.checked?r.setState({checked:!1}):r.setState({checked:!0});case 1:case"end":return e.stop()}}),e)})))),r}return(0,c.Z)(n,[{key:"render",value:function(){var e=this;return S(g.Z,null,S("div",null,S("h3",null,"Buy 1 BMB Token"),S(p.Z,{error:!!this.state.errorMessage},S(p.Z.Field,null,S("label",null,"1 BMB Token = 0.0024 BNB")),S(p.Z.Field,null,S(w.Z,{onChange:function(t){return e.setState({tokenAmount:t.target.value})},value:this.state.tokenAmount,placeholder:"Token Amount"})),S(p.Z.Field,null,S(Z.Z,{onChange:this.handleCheckbox,name:"terms_conditions",label:"I agree to the Terms and Conditions"})),S(v.Z,{loading:this.state.loaded,onClick:this.handleBuyToken,content:"Buy Token",icon:"cart",primary:!0}),S(m.Z,{error:!0,header:"Note",content:this.state.errorMessage}))))}}]),n}(k.Component);t.default=B},6472:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/buy-token",function(){return n(408)}])}},function(e){e.O(0,[774,543,930,351,592,416,515,479],(function(){return t=6472,e(e.s=t);var t}));var t=e.O();_N_E=t}]);